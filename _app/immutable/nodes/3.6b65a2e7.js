import{_ as J}from"../chunks/preload-helper.a4192956.js";import{s as K,n as G,o as Q}from"../chunks/scheduler.e108d1fd.js";import{S as Z,i as ee,g as R,s as P,h as S,x as te,c as z,j as ne,f as w,k as oe,a as y}from"../chunks/index.5294257e.js";import{g as se,T as ie,F as ae,t as re}from"../chunks/Yellowtail_Regular.08bf4c6e.js";import{l as T,b as W,w as ce,a as q}from"../chunks/colors.e07b005e.js";import{S as le,W as ue,a as fe,V as me,R as he,f as pe,G as A,c as $,B as de,M as H}from"../chunks/three.module.6d4a35a4.js";function we(k){let i,g="Minesweeper",a,h,n,e;return{c(){i=R("h2"),i.textContent=g,a=P(),h=R("br"),n=P(),e=R("canvas"),this.h()},l(t){i=S(t,"H2",{"data-svelte-h":!0}),te(i)!=="svelte-28pnkw"&&(i.textContent=g),a=z(t),h=S(t,"BR",{}),n=z(t),e=S(t,"CANVAS",{id:!0}),ne(e).forEach(w),this.h()},h(){oe(e,"id","mineField")},m(t,r){y(t,i,r),y(t,a,r),y(t,h,r),y(t,n,r),y(t,e,r)},p:G,i:G,o:G,d(t){t&&(w(i),w(a),w(h),w(n),w(e))}}}const B=12,j=12;function ge(k){const i=[{row:0,column:0},{row:1,column:2},{row:3,column:9},{row:4,column:1},{row:4,column:3},{row:6,column:6},{row:10,column:10},{row:11,column:3},{row:11,column:8}];let g=0;const a=[];for(let n=0;n<B;n++){let e=[];for(let t=0;t<j;t++)e.push(0);a.push(e)}function h(n,e){const t=[];if(n>0){const s=n-1;e>0&&t.push({row:s,column:e-1}),t.push({row:s,column:e}),e<a[s].length-1&&t.push({row:s,column:e+1})}e>0&&t.push({row:n,column:e-1}),e<a[n].length-1&&t.push({row:n,column:e+1});const r=a.length-1;if(n<r){const s=n+1;e>0&&t.push({row:s,column:e-1}),t.push({row:s,column:e}),e<a[s].length-1&&t.push({row:s,column:e+1})}return t}return i.forEach(({row:n,column:e})=>{a[n][e]=-1,h(n,e).forEach(({row:r,column:s})=>{a[r][s]!==-1&&(a[r][s]+=1)})}),Q(async()=>{const{OrbitControls:n}=await J(()=>import("../chunks/OrbitControls.29d7259e.js"),["../chunks/OrbitControls.29d7259e.js","../chunks/three.module.6d4a35a4.js"],import.meta.url),e=[],t={},{width:r,height:s}=se(),C=new le,x=document.getElementById("mineField"),_=new ue({canvas:x??void 0});_.setSize(r,s);const d=new fe(100,r/s,.1,100);d.position.set(0,0,10),d.lookAt(new me(0,0,0)),C.add(d);const F=new he,E=new pe,M=new A;M.position.set(-5.5,-5.5,0),C.add(M);const O=new A;M.add(O);const D=new A;M.add(D);let f=0,m=0;for(;f<B;){e[f]||(e[f]=[]);const o=i.some(b=>b.row===f&&b.column===m);let c=m%2===0?T:W;f%2===0&&(c=m%2===0?W:T);const l=a[f][m],u=new $(new de(1,1,1),new H({color:c}));u.position.y=f,u.position.x=m,u.userData={active:!1,neighboringMineCount:l,mine:o},e[f].push(u),O.add(u),m+=1,m===j&&(f+=1,m=0)}function L(){i.forEach(({row:o,column:c})=>{e[o][c].material.color.set(q)})}function N(o){if(o.userData.mine){L(),alert("you lose!");return}if(!o.userData.active){g+=1,o.userData.active=!0,o.material.color.set(ce);const c=t[o.uuid];if(c){const l=D.getObjectById(c);l&&(l.visible=!1)}if(g===B*j-i.length){L(),alert("you win!");return}o.userData.neighboringMineCount===0&&h(o.position.y,o.position.x).forEach(({row:u,column:b})=>{const p=e[u][b];if(p.userData.neighboringMineCount>0&&!t[p.uuid]){const I=new ie(p.userData.neighboringMineCount+"",{bevelEnabled:!1,font:new ae(re),height:.1,size:.5});I.center();const v=new $(I,new H({color:q}));v.position.y=u,v.position.x=b,v.position.z=.5,D.add(v),t[p.uuid]=v.id}!p.userData.mine&&p.userData.neighboringMineCount===0&&N(p)})}}function U(o){E.x=o.offsetX/r*2-1,E.y=-(o.offsetY/s)*2+1}function X(){F.setFromCamera(E,d);let o=[];if(o=F.intersectObjects(C.children),o.length){let c;o.filter(l=>l.object.type==="Mesh"&&l.object.geometry.type==="BoxGeometry").map((l,u)=>{u===0&&(c=l.object)}),c&&N(c)}}x&&(x.addEventListener("mousemove",U,!1),x.addEventListener("click",X,!1));const Y=new n(d,_.domElement);function V(){Y.update(),_.render(C,d),window.requestAnimationFrame(V)}V()}),[]}class _e extends Z{constructor(i){super(),ee(this,i,ge,we,K,{})}}export{_e as component};
